---
import Layout from '../layouts/Layout.astro';
import Header from '../components/layout/Header.astro';
import Footer from '../components/layout/Footer.astro';
import { ActivityFeed } from '../components/activity/ActivityFeed';
import { ProgressTracker } from '../components/gamification/ProgressTracker';
import { CyberpunkHeroAnimation } from '../components/CyberpunkAnimation';

const title = 'Nostrich.love - Social Media That Respects You';
const description = 'Try decentralized social media without the complexity. Join thousands leaving Twitter for a platform that puts you in control‚Äînot algorithms or corporations.';

const valueProps = [
  { 
    icon: 'üéÆ', 
    title: 'Learn at Your Pace', 
    description: 'Track your progress with clear milestones from first steps to power user' 
  },
  { 
    icon: 'üîê', 
    title: 'You Own Everything', 
    description: 'Your account, your followers, your content. No platform can delete you.' 
  },
  { 
    icon: '‚ö°', 
    title: 'Earn From Day One', 
    description: 'Built-in micropayments let supporters tip you directly‚Äîno ads needed' 
  },
];

const comparisonPoints = [
  {
    twitter: {
      icon: 'ü§ñ',
      title: 'Algorithm decides',
      subtitle: 'what you see',
      description: 'Sponsored content and engagement bait prioritized over your friends'
    },
    nostr: {
      icon: '‚úÖ',
      title: 'You decide',
      subtitle: 'what you see',
      description: 'Chronological feed showing posts from people you follow‚Äîno manipulation'
    }
  },
  {
    twitter: {
      icon: 'üÜî',
      title: 'ID verification',
      subtitle: 'required',
      description: 'Upload government ID + selfie. Your identity sold to data brokers.'
    },
    nostr: {
      icon: 'üîí',
      title: 'Stay anonymous',
      subtitle: 'or use any name',
      description: 'No phone number, no email, no ID required. Truly private.'
    }
  },
  {
    twitter: {
      icon: '‚ùå',
      title: 'Account deleted',
      subtitle: 'without warning',
      description: 'Years of content gone instantly. No appeal. No recourse.'
    },
    nostr: {
      icon: 'üíæ',
      title: 'Your content',
      subtitle: 'stored forever',
      description: 'Distributed across 50+ servers. You own your digital footprint.'
    }
  },
  {
    twitter: {
      icon: 'üí∞',
      title: 'Your data sold',
      subtitle: 'for profit',
      description: 'Twitter makes money from your attention. You get nothing.'
    },
    nostr: {
      icon: '‚ö°',
      title: 'You get paid',
      subtitle: 'directly',
      description: 'Supporters send instant tips. Keep 100%‚Äîno platform cut.'
    }
  }
];

const paths = [
  {
    id: 'beginner',
    icon: 'üëã',
    title: "I'm New to Nostr",
    subtitle: 'Start your journey with simple, beginner-friendly guides',
    description: 'Start here if you want the simplest path. We\'ll show you the basics without overwhelming technical details.',
    features: ['Simple explanations', 'Step-by-step guides', 'No crypto knowledge needed'],
    cta: 'Start Simple',
    theme: 'friendly'
  },
  {
    id: 'bitcoiner',
    icon: '‚Çø',
    title: 'Bitcoiner',
    subtitle: 'I get keys, show me the good stuff',
    description: 'Already understand self-custody? Skip the basics and dive into the best clients and Lightning integration.',
    features: ['Skip fundamentals', 'Lightning-first setup', 'Technical deep dives'],
    cta: 'Bitcoiner Fast Track',
    theme: 'cyberpunk'
  },
  {
    id: 'privacy',
    icon: 'üîí',
    title: 'Privacy First',
    subtitle: 'Maximum security & anonymity',
    description: 'For those who demand the highest privacy. Learn threat modeling, OpSec, and hardening techniques.',
    features: ['Threat modeling', 'Advanced OpSec', 'Privacy hardening'],
    cta: 'Secure Setup',
    theme: 'cyberpunk'
  }
];
---

<Layout title={title} description={description} data-theme="friendly">
  <Header />
  
  <main id="main-content" class="theme-bg-primary transition-colors duration-500">
    <!-- Hero Section - Friendly Theme -->
    <section class="relative min-h-[700px] flex items-center bg-gradient-to-br from-friendly-purple-100 via-friendly-warm-50 to-white dark:from-gray-900 dark:via-gray-900 dark:to-gray-800">
      <!-- Subtle animated background for friendly theme -->
      <div class="absolute inset-0 overflow-hidden">
        <div class="absolute -top-1/2 -right-1/2 w-full h-full bg-gradient-to-br from-friendly-purple-200/30 to-transparent rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute -bottom-1/2 -left-1/2 w-full h-full bg-gradient-to-tr from-friendly-gold-200/20 to-transparent rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
      </div>
      
      <div class="relative z-10 w-full">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
          <div class="max-w-5xl mx-auto">
            <!-- Badge -->
            <div class="flex justify-center mb-6">
              <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-friendly-purple-200 dark:border-friendly-purple-700 shadow-sm">
                <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                <span class="text-sm text-gray-700 dark:text-gray-300 font-medium">No accounts ‚Ä¢ No passwords ‚Ä¢ No corporations</span>
              </div>
            </div>
            
            <!-- Main Headline -->
            <div class="text-center mb-8">
              <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold tracking-tight mb-6 text-gray-900 dark:text-white">
                <span class="block">Social Media That</span>
                <span class="bg-gradient-to-r from-friendly-purple-600 to-friendly-purple-400 bg-clip-text text-transparent">
                  Respects You
                </span>
              </h1>
              
              <p class="text-xl sm:text-2xl text-gray-600 dark:text-gray-400 mb-4 max-w-3xl mx-auto leading-relaxed">
                No algorithms. No data selling. No ID verification required. 
                Just you, your content, and your community.
              </p>
              
              <p class="text-lg text-gray-500 dark:text-gray-400 max-w-2xl mx-auto">
                Join thousands leaving Twitter for a <span class="font-semibold text-friendly-purple-600 dark:text-friendly-purple-400">protocol</span> that puts you in control.
              </p>
            </div>
            
            <!-- 3-Path Selector -->
            <div class="mt-12">
              <p class="text-center text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-6">
                Who are you? Choose your path:
              </p>
              
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6">
                {paths.map((path) => (
                  <button
                    type="button"
                    class="path-selector group relative p-6 bg-white dark:bg-gray-800 rounded-2xl border-2 border-gray-200 dark:border-gray-700 hover:border-friendly-purple-400 dark:hover:border-friendly-purple-500 transition-all duration-300 shadow-sm hover:shadow-lg text-left"
                    data-path={path.id}
                    data-theme={path.theme}
                  >
                    <div class="flex items-start gap-4">
                      <span class="text-3xl">{path.icon}</span>
                      <div class="flex-1">
                        <h3 class="font-bold text-lg text-gray-900 dark:text-white group-hover:text-friendly-purple-600 transition-colors">
                          {path.title}
                        </h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">{path.subtitle}</p>
                      </div>
                    </div>
                    
                    <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700">
                      <ul class="space-y-1 text-sm text-gray-600 dark:text-gray-400">
                        {path.features.map((feature) => (
                          <li class="flex items-center gap-2">
                            <svg class="w-4 h-4 text-friendly-purple-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                            {feature}
                          </li>
                        ))}
                      </ul>
                    </div>
                    
                    <div class="mt-4 flex items-center justify-between">
                      <span class="text-sm font-semibold text-friendly-purple-600 group-hover:text-friendly-purple-700">
                        {path.cta}
                      </span>
                      <svg class="w-5 h-5 text-gray-400 group-hover:text-friendly-purple-500 group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                      </svg>
                    </div>
                  </button>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Why Nostr > Twitter Section -->
    <section class="py-20 bg-white dark:bg-gray-900">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-5xl mx-auto">
          <div class="text-center mb-12">
            <h2 class="text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-4">
              Why People Are Switching
            </h2>
            <p class="text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
              See how Nostr solves the problems that made Twitter frustrating‚Äîand why it's getting harder to stay on centralized platforms.
            </p>
          </div>

          <div class="space-y-8">
            {comparisonPoints.map((point, index) => (
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Twitter Side -->
                <div class="p-6 rounded-2xl bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 opacity-75">
                  <div class="flex items-start gap-4">
                    <span class="text-3xl">{point.twitter.icon}</span>
                    <div>
                      <div class="flex items-baseline gap-2">
                        <h3 class="font-bold text-lg text-gray-700 dark:text-gray-300 line-through">{point.twitter.title}</h3>
                        <span class="text-sm text-gray-500 dark:text-gray-400">{point.twitter.subtitle}</span>
                      </div>
                      <p class="text-gray-600 dark:text-gray-400 mt-1">{point.twitter.description}</p>
                    </div>
                  </div>
                </div>

                <!-- Nostr Side -->
                <div class="p-6 rounded-2xl bg-gradient-to-br from-friendly-purple-50 to-white dark:bg-gray-800 dark:bg-none border-2 border-friendly-purple-200 dark:border-friendly-purple-500/70 shadow-sm">
                  <div class="flex items-start gap-4">
                    <span class="text-3xl">{point.nostr.icon}</span>
                    <div>
                      <div class="flex items-baseline gap-2">
                        <h3 class="font-bold text-lg text-friendly-purple-700 dark:text-friendly-purple-200">{point.nostr.title}</h3>
                        <span class="text-sm text-friendly-purple-600 dark:text-friendly-purple-100 font-medium">{point.nostr.subtitle}</span>
                      </div>
                      <p class="text-gray-700 dark:text-gray-100 mt-1">{point.nostr.description}</p>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>

          <!-- Special Callout for ID Verification -->
          <div class="mt-12 p-6 rounded-2xl bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/30 dark:to-orange-900/30 border border-amber-200 dark:border-amber-800">
            <div class="flex items-start gap-4">
              <span class="text-3xl">‚ö†Ô∏è</span>
              <div>
                <h3 class="font-bold text-lg text-amber-900 dark:text-amber-400 mb-2">
                  Social Media Is Requiring More of Your Identity
                </h3>
                <p class="text-amber-800 dark:text-amber-300">
                  Twitter/X is rolling out mandatory government ID + selfie verification in more regions. 
                  Your biometric data, linked to your real identity, stored who-knows-where. 
                  <span class="font-semibold">Nostr never requires ID.</span> Not now. Not ever.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Value Proposition Section -->
    <section class="py-16 bg-friendly-warm-50 dark:bg-gray-900 border-y border-friendly-purple-100 dark:border-gray-700">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
          {valueProps.map((prop) => (
            <div class="text-center p-6">
              <div class="text-4xl mb-4">{prop.icon}</div>
              <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-2">{prop.title}</h3>
              <p class="text-sm text-gray-600 dark:text-gray-300">{prop.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Social Proof & Activity Section -->
    <section class="py-20 bg-white dark:bg-gray-900">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
          {/* Stats Column */}
          <div class="lg:col-span-2">
            <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-8 text-center lg:text-left">
              Join Thousands Making the Switch
            </h2>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-12">
              <div class="text-center">
                <div class="text-4xl font-bold text-friendly-purple-600">50K+</div>
                <div class="text-gray-600 dark:text-gray-400">Active Users</div>
              </div>
              <div class="text-center">
                <div class="text-4xl font-bold text-friendly-purple-600">15</div>
                <div class="text-gray-600 dark:text-gray-400">Step-by-Step Guides</div>
              </div>
              <div class="text-center">
                <div class="text-4xl font-bold text-friendly-purple-600">7</div>
                <div class="text-gray-600 dark:text-gray-400">Client Options</div>
              </div>
              <div class="text-center">
                <div class="text-4xl font-bold text-friendly-purple-600">100%</div>
                <div class="text-gray-600 dark:text-gray-400">Open Source</div>
              </div>
            </div>

            <p class="text-gray-500 dark:text-gray-400 text-sm text-center lg:text-left">
              Numbers updated daily. No accounts required to try‚Äîsee for yourself.
            </p>
          </div>

          {/* Activity Feed Sidebar - Desktop */}
          <div class="hidden lg:block">
            <div class="sticky top-24">
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2">
                <svg class="w-5 h-5 text-friendly-purple" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
                Recent Activity
              </h3>
              <ActivityFeed client:load compact={true} maxItems={4} />
            </div>
          </div>
        </div>
      </div>
    </section>

    {/* Activity Feed - Mobile Footer */}
    <section class="py-12 bg-gray-50 dark:bg-gray-800 lg:hidden">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2">
          <svg class="w-5 h-5 text-friendly-purple" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
          Recent Activity
        </h3>
        <ActivityFeed client:load compact={true} maxItems={3} />
      </div>
    </section>

    <!-- CTA Section -->
    <section class="py-20 bg-gradient-to-br from-friendly-purple-100 via-white to-friendly-gold-50 dark:from-friendly-purple-900/30 dark:via-gray-900 dark:to-friendly-gold-900/20">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-4">
          Ready to Try Something Better?
        </h2>
        <p class="text-xl text-gray-600 dark:text-gray-400 mb-8 max-w-2xl mx-auto">
          It takes 2 minutes to get started. No phone number required. No strings attached.
        </p>
        
        <!-- Path selector again for convenience -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center mb-8">
          <a
            href="/guides"
            class="path-link inline-flex items-center justify-center px-8 py-4 text-base font-semibold text-white bg-friendly-purple-600 hover:bg-friendly-purple-700 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl hover:-translate-y-0.5"
            data-path="beginner"
          >
            Start Simple
            <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
            </svg>
          </a>
          <a
            href="/guides"
            class="path-link inline-flex items-center justify-center px-8 py-4 text-base font-semibold text-friendly-purple-700 dark:text-friendly-purple-400 bg-white dark:bg-gray-800 border-2 border-friendly-purple-200 dark:border-friendly-purple-700 hover:border-friendly-purple-400 dark:hover:border-friendly-purple-500 rounded-xl transition-all duration-200"
            data-path="bitcoiner"
          >
            Bitcoiner Fast Track
          </a>
          <a
            href="/guides"
            class="path-link inline-flex items-center justify-center px-8 py-4 text-base font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 hover:border-gray-400 dark:hover:border-gray-500 rounded-xl transition-all duration-200"
            data-path="privacy"
          >
            Privacy Setup
          </a>
        </div>
        
        <p class="text-sm text-gray-500 dark:text-gray-400">
          Already know Nostr? <a href="/tools" class="text-friendly-purple-600 dark:text-friendly-purple-400 hover:underline font-medium">Jump to Tools</a> ‚Ä¢ 
          Open source on <a href="https://github.com/aljazceru/awesome-nostr" target="_blank" rel="noopener noreferrer" class="text-friendly-purple-600 dark:text-friendly-purple-400 hover:underline font-medium">GitHub</a>
        </p>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<script>
  // Path selection and persistence
  const PATH_STORAGE_KEY = 'nostrich-user-path';
  
  // Get stored path
  function getUserPath() {
    try {
      // Support both 'beginner' (new) and 'general' (legacy) paths
      const stored = localStorage.getItem(PATH_STORAGE_KEY);
      if (stored === 'general') {
        // Migrate legacy path to new name
        localStorage.setItem(PATH_STORAGE_KEY, 'beginner');
        return 'beginner';
      }
      return stored || 'beginner';
    } catch (e) {
      return 'beginner';
    }
  }
  
  // Set user path
  function setUserPath(path) {
    try {
      localStorage.setItem(PATH_STORAGE_KEY, path);
    } catch (e) {
      console.error('Error saving path:', e);
    }
  }
  
  // Update active path UI
  function updateActivePath(path) {
    document.querySelectorAll('.path-selector').forEach((btn) => {
      if (btn.dataset.path === path) {
        btn.classList.add('border-friendly-purple-500', 'bg-friendly-purple-50');
        btn.classList.remove('border-gray-200', 'bg-white');
      } else {
        btn.classList.remove('border-friendly-purple-500', 'bg-friendly-purple-50');
        btn.classList.add('border-gray-200', 'bg-white');
      }
    });
  }
  
  // Initialize
  const currentPath = getUserPath();
  updateActivePath(currentPath);
  
  // Handle path selection clicks
  document.querySelectorAll('.path-selector').forEach((btn) => {
    btn.addEventListener('click', () => {
      const path = btn.dataset.path;
      setUserPath(path);
      updateActivePath(path);
      
      // Optional: Update theme based on path
      if (path === 'beginner' || path === 'general') {
        document.body.setAttribute('data-theme', 'friendly');
      } else {
        document.body.setAttribute('data-theme', 'cyberpunk');
      }
      
      // Navigate to guides with path parameter
      window.location.href = `/guides?path=${path}`;
    });
  });
  
  // Handle CTA links
  document.querySelectorAll('.path-link').forEach((link) => {
    link.addEventListener('click', (e) => {
      const path = link.dataset.path || getUserPath();
      setUserPath(path);
      e.preventDefault();
      window.location.href = `/guides?path=${path}`;
    });
  });
</script>
