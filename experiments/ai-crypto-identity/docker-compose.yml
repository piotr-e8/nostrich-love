version: '3.8'

services:
  riff-relay:
    image: coolwax/strfry:latest
    container_name: riff-relay
    ports:
      - "7777:7777"
    volumes:
      - ./strfry-data:/app/strfry-db
      - ./strfry.conf:/app/strfry.conf:ro
    restart: unless-stopped
    environment:
      - STRFRY_CONFIG=/app/strfry.conf
    healthcheck:
      test: ["CMD", "wget", "--spider", "-q", "http://localhost:7777"]
      interval: 30s
      timeout: 10s
      retries: 3
